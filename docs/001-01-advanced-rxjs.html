<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-10-14T07:14:24.589856"><title>Module 1 : Pour aller plus loin - L'Art de la Composition et de la R&eacute;silience | Angular avancé</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction","level":0,"title":"Introduction","anchor":"#introduction"},{"id":"gestion-avanc-e-des-erreurs-et-de-la-r-silience","level":0,"title":"Gestion Avancée des Erreurs et de la Résilience","anchor":"#gestion-avanc-e-des-erreurs-et-de-la-r-silience"},{"id":"la-combinaison-de-flux-cr-er-des-vues-riches","level":0,"title":"La Combinaison de Flux : Créer des Vues Riches","anchor":"#la-combinaison-de-flux-cr-er-des-vues-riches"},{"id":"exercice-1-2-le-dashboard-multi-sources","level":0,"title":"Exercice 1.2 : Le Dashboard Multi-Sources","anchor":"#exercice-1-2-le-dashboard-multi-sources"},{"id":"auto-valuation","level":0,"title":"Auto-évaluation","anchor":"#auto-valuation"},{"id":"conclusion","level":0,"title":"Conclusion","anchor":"#conclusion"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Module 1 : Pour aller plus loin - L'Art de la Composition et de la R&eacute;silience | Angular avancé"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Angular avancé Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/001-01-advanced-rxjs.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Module 1 : Pour aller plus loin - L'Art de la Composition et de la R&eacute;silience | Angular avancé"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/001-01-advanced-rxjs.html#webpage",
    "url": "writerside-documentation/001-01-advanced-rxjs.html",
    "name": "Module 1 : Pour aller plus loin - L'Art de la Composition et de la R&eacute;silience | Angular avancé",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Angular avancé Help"
}</script><!-- End Schema.org --></head><body data-id="001-01-advanced-rxjs" data-main-title="Module 1 : Pour aller plus loin - L'Art de la Composition et de la Résilience" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="001-00-RXJS.md|Module 1 : L'essentiel - Maîtrise de RxJS, le cœur réactif d'Angular"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Angular avancé  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="001-01-advanced-rxjs" id="001-01-advanced-rxjs.md">Module 1 : Pour aller plus loin - L'Art de la Composition et de la Résilience</h1><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs p&eacute;dagogiques</h2><p id="rg8zwx_10">&Agrave; la fin de cette partie, vous aurez ajout&eacute; de puissants outils RxJS &agrave; votre arsenal :</p><ul class="list _bullet" id="rg8zwx_11"><li class="list__item" id="rg8zwx_12"><p id="rg8zwx_17"><span class="control" id="rg8zwx_18">Impl&eacute;menter</span> des strat&eacute;gies de gestion d'erreurs robustes avec <code class="code" id="rg8zwx_19">catchError</code> et <code class="code" id="rg8zwx_20">retry</code>.</p></li><li class="list__item" id="rg8zwx_13"><p id="rg8zwx_21"><span class="control" id="rg8zwx_22">Ex&eacute;cuter</span> des actions de nettoyage (comme cacher un loader) de mani&egrave;re fiable avec <code class="code" id="rg8zwx_23">finalize</code>.</p></li><li class="list__item" id="rg8zwx_14"><p id="rg8zwx_24"><span class="control" id="rg8zwx_25">Combiner</span> plusieurs flux de donn&eacute;es en parall&egrave;le avec <code class="code" id="rg8zwx_26">forkJoin</code> pour optimiser les chargements.</p></li><li class="list__item" id="rg8zwx_15"><p id="rg8zwx_27"><span class="control" id="rg8zwx_28">Synchroniser</span> des flux r&eacute;actifs avec <code class="code" id="rg8zwx_29">combineLatest</code> pour construire des interfaces dynamiques.</p></li><li class="list__item" id="rg8zwx_16"><p id="rg8zwx_30"><span class="control" id="rg8zwx_31">Construire</span> un dashboard complexe qui charge plusieurs sources de donn&eacute;es et g&egrave;re un &eacute;tat de chargement global.</p></li></ul></section><section class="chapter"><h2 id="introduction" data-toc="introduction">Introduction</h2><p id="rg8zwx_32">Dans la partie &quot;L'essentiel&quot;, nous avons appris &agrave; diriger un musicien solo. Nous avons pris un flux de donn&eacute;es et l'avons transform&eacute; avec <code class="code" id="rg8zwx_35">switchMap</code> ou <code class="code" id="rg8zwx_36">concatMap</code>. C'est d&eacute;j&agrave; une grande r&eacute;ussite.</p><p id="rg8zwx_33">Maintenant, il est temps de devenir le chef d'orchestre. Que se passe-t-il si un musicien joue une fausse note ? ( Gestion des erreurs). Que se passe-t-il lorsque vous devez faire jouer plusieurs sections de l'orchestre en m&ecirc;me temps pour atteindre un crescendo spectaculaire ? (Combinaison de flux).</p><p id="rg8zwx_34">Cette partie est d&eacute;di&eacute;e &agrave; la r&eacute;silience et &agrave; la composition. Une application professionnelle ne doit pas s'effondrer au premier p&eacute;pin r&eacute;seau. Elle doit g&eacute;rer les erreurs avec gr&acirc;ce. De m&ecirc;me, une interface utilisateur riche d&eacute;pend souvent de plusieurs sources de donn&eacute;es qui doivent &ecirc;tre charg&eacute;es et synchronis&eacute;es. Apprendre &agrave; ma&icirc;triser ces techniques est ce qui s&eacute;pare une application fonctionnelle d'une application v&eacute;ritablement robuste et impressionnante.</p></section><section class="chapter"><h2 id="gestion-avanc-e-des-erreurs-et-de-la-r-silience" data-toc="gestion-avanc-e-des-erreurs-et-de-la-r-silience">Gestion Avanc&eacute;e des Erreurs et de la R&eacute;silience</h2><p id="rg8zwx_37">Un <code class="code" id="rg8zwx_39">Observable</code> qui rencontre une erreur (via la m&eacute;thode <code class="code" id="rg8zwx_40">error()</code>) est un <code class="code" id="rg8zwx_41">Observable</code> mort. Il s'arr&ecirc;te net et ne produira plus jamais de valeurs. Si vous ne g&eacute;rez pas cette erreur, elle peut se propager et &quot;casser&quot; votre cha&icirc;ne d'op&eacute;rateurs, laissant votre UI dans un &eacute;tat incoh&eacute;rent. Heureusement, RxJS nous fournit les outils pour nous d&eacute;fendre.</p><div class="tabs" id="rg8zwx_38" data-anchors="[rg8zwx_42,rg8zwx_43,rg8zwx_44]"><div class="tabs__content" data-gtm="tab" id="rg8zwx_42" data-title="catchError : L'airbag"><p id="rg8zwx_45">L'op&eacute;rateur <code class="code" id="rg8zwx_50">catchError</code> est votre &quot;try-catch&quot; pour les <code class="code" id="rg8zwx_51">Observables</code>. Il intercepte une erreur dans le flux et vous donne une chance de la g&eacute;rer.</p><p id="rg8zwx_46"><span class="control" id="rg8zwx_52">La r&egrave;gle d'or :</span> <code class="code" id="rg8zwx_53">catchError</code> doit retourner un <span class="control" id="rg8zwx_54">nouvel <code class="code" id="rg8zwx_55">Observable</code></span>. Vous pouvez retourner :</p><ul class="list _bullet" id="rg8zwx_47"><li class="list__item" id="rg8zwx_56"><p id="rg8zwx_59">Un <code class="code" id="rg8zwx_60">Observable</code> avec une valeur par d&eacute;faut (ex: <code class="code" id="rg8zwx_61">of([])</code> pour retourner un tableau vide).</p></li><li class="list__item" id="rg8zwx_57"><p id="rg8zwx_62">Un autre appel API (ex: r&eacute;essayer avec un autre serveur).</p></li><li class="list__item" id="rg8zwx_58"><p id="rg8zwx_63">L'erreur elle-m&ecirc;me, pour la propager apr&egrave;s l'avoir trait&eacute;e (ex: <code class="code" id="rg8zwx_64">throwError(() =&gt; error)</code>).</p></li></ul><div class="code-block" data-lang="ts" data-title="TypeScript">
import {HttpClient} from '@angular/common/http';
import {inject} from '@angular/core';
import {of, throwError} from 'rxjs';
import {catchError} from 'rxjs/operators';

const http = inject(HttpClient);

http.get('/api/users').pipe(
    catchError(error =&gt; {
        // Log l'erreur pour les développeurs
        console.error('Erreur lors de la récupération des utilisateurs', error);

        // Pour l'utilisateur, on retourne un tableau vide pour ne pas casser l'UI
        return of([]);
    })
).subscribe(users =&gt; console.log(users)); // L'UI reçoit [] et continue de fonctionner
</div><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="255px" preserveAspectRatio="none" style="width:404px;height:255px;background:#FFFFFF;" version="1.1" viewBox="0 0 404 255" width="404px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="142.1973" style="stroke:#696969;stroke-width:1.0;" width="10" x="181.5" y="67.7988"/><rect fill="none" height="120.1973" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="263" x="134" y="82.7988"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="69" x2="69" y1="36.4883" y2="219.9961"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="186" x2="186" y1="36.4883" y2="219.9961"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="313" x2="313" y1="36.4883" y2="219.9961"/><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="129" x="5" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="12" y="25.5352">Source (http.get)</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="129" x="5" y="218.9961"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="12" y="239.5313">Source (http.get)</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="85" x="144" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="151" y="25.5352">catchError</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="85" x="144" y="218.9961"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="151" y="239.5313">catchError</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="148" x="239" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="246" y="25.5352">Abonn&#233; (subscribe)</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="148" x="239" y="218.9961"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="246" y="239.5313">Abonn&#233; (subscribe)</text><rect fill="#FFFFFF" height="142.1973" style="stroke:#696969;stroke-width:1.0;" width="10" x="181.5" y="67.7988"/><polygon fill="#454645" points="169.5,63.7988,179.5,67.7988,169.5,71.7988,173.5,67.7988" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="69.5" x2="175.5" y1="67.7988" y2="67.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="76.5" y="63.0566">Erreur!</text><path d="M137.5,82.7988 L196,82.7988 L196,90.1094 L186,100.1094 L134,100.1094 L134,86.2988 A3.5,3.5 0 0 1 137.5,82.7988 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="120.1973" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="263" x="134" y="82.7988"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="149" y="96.3672">alt</text><text fill="#696969" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="211" y="95.4336">[Erreur g&#233;r&#233;e]</text><polygon fill="#454645" points="301,117.4199,311,121.4199,301,125.4199,305,121.4199" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="191.5" x2="307" y1="121.4199" y2="121.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="198.5" y="116.6777">next([])</text><polygon fill="#454645" points="301,146.7305,311,150.7305,301,154.7305,305,150.7305" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="191.5" x2="307" y1="150.7305" y2="150.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="198.5" y="145.9883">complete()</text><line style="stroke:#696969;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="134" x2="397" y1="159.7305" y2="159.7305"/><text fill="#696969" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="98" x="139" y="170.3652">[Erreur propag&#233;e]</text><polygon fill="#454645" points="301,190.9961,311,194.9961,301,198.9961,305,194.9961" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="191.5" x2="307" y1="194.9961" y2="194.9961"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38" x="198.5" y="190.2539">error()</text><!--SRC=[ROz1JiGm34NtFeLdLkq23Z0B98Gu0Kl4mibyjH5j4Zdk28xKS_HYaqABDC3IzllFzi5wZE1BS2hHgBo7c4Lbv254s6S69xK-4TMk1HzofVZuaYRruAOto_STh3so5Fxktf9UpFVFgac_aAUrXDuoZox5kCpSbCaLhy5XyqsEQ5jrzx1d-SJLXqaF9Dx2HGm_MfB1jYbtowpB3DfZrL25DHtnOSthM_jtujEO1nYQbZ0KxAQiAKlthmlhPoiUptJ6xtkk]--></g></svg></div></div><div class="tabs__content" data-gtm="tab" id="rg8zwx_43" data-title="retry(n) : La Seconde Chance"><p id="rg8zwx_65">Parfois, une erreur est temporaire (un soubresaut du r&eacute;seau). <code class="code" id="rg8zwx_69">retry</code> permet de se r&eacute;-abonner automatiquement au flux source qui a &eacute;chou&eacute;, un certain nombre de fois.</p><p id="rg8zwx_66">C'est un outil simple mais puissant pour am&eacute;liorer la r&eacute;silience de votre application face &agrave; des probl&egrave;mes de connectivit&eacute; intermittents.</p><aside class="prompt" data-type="warning" data-title="" id="rg8zwx_67"><p>**Attention :** Utilisez `retry` avec sagesse. Retenter une requ&ecirc;te qui a &eacute;chou&eacute; avec un code 404 (Not Found) ou 403 (Forbidden) est inutile, car l'&eacute;chec est permanent. C'est id&eacute;al pour les erreurs 5xx (Server Error) ou les erreurs r&eacute;seau.</p></aside><div class="code-block" data-lang="ts" data-title="TypeScript">
import {HttpClient} from '@angular/common/http';
import {inject} from '@angular/core';
import {of} from 'rxjs';
import {catchError, retry} from 'rxjs/operators';

const http = inject(HttpClient);

http.get('/api/flaky-endpoint').pipe(
    // Tente la requête jusqu'à 3 fois (1 initiale + 2 retries)
    retry(2),
    catchError(error =&gt; {
        console.error('La requête a échoué après 3 tentatives.');
        // Si après toutes les tentatives ça ne marche pas,
        // on retourne une valeur par défaut.
        return of({data: 'indisponible'});
    })
).subscribe();
</div></div><div class="tabs__content" data-gtm="tab" id="rg8zwx_44" data-title="finalize : Le Nettoyage Final"><p id="rg8zwx_70">L'op&eacute;rateur <code class="code" id="rg8zwx_73">finalize</code> est le bloc <code class="code" id="rg8zwx_74">finally</code> de votre <code class="code" id="rg8zwx_75">Observable</code>. Il ex&eacute;cute une fonction callback quand le flux se termine, que ce soit par un <code class="code" id="rg8zwx_76">complete</code> (succ&egrave;s) ou un <code class="code" id="rg8zwx_77">error</code> (&eacute;chec).</p><p id="rg8zwx_71">C'est l'endroit <span class="control" id="rg8zwx_78">parfait</span> pour faire du nettoyage, et notamment pour cacher un indicateur de chargement (<code class="code" id="rg8zwx_79">loader</code>).</p><div class="code-block" data-lang="ts" data-title="TypeScript">
import {tap, finalize} from 'rxjs/operators';

this.isLoading = true; // Affiche le loader AVANT de s'abonner

myHttpCall$.pipe(
    tap(data =&gt; console.log('Données reçues:', data)),

    // Ce bloc sera TOUJOURS exécuté
    finalize(() =&gt; {
        this.isLoading = false; // Cache le loader, que ça réussisse ou non
        console.log('Flux terminé.');
    })
).subscribe({
    next: data =&gt; { /* Fait quelque chose avec les données */
    },
    error: err =&gt; { /* Gère l'erreur si nécessaire */
    }
});
</div></div></div></section><section class="chapter"><h2 id="la-combinaison-de-flux-cr-er-des-vues-riches" data-toc="la-combinaison-de-flux-cr-er-des-vues-riches">La Combinaison de Flux : Cr&eacute;er des Vues Riches</h2><p id="rg8zwx_80">Rarement une page complexe ne d&eacute;pend que d'une seule source de donn&eacute;es. Un dashboard peut avoir besoin des infos utilisateur, de la liste des ventes et des notifications r&eacute;centes. Comment charger tout cela efficacement ?</p><div class="tabs" id="rg8zwx_81" data-anchors="[rg8zwx_82,rg8zwx_83]"><div class="tabs__content" data-gtm="tab" id="rg8zwx_82" data-title="forkJoin : Le Peloton d'Ex&eacute;cution"><p id="rg8zwx_84"><code class="code" id="rg8zwx_89">forkJoin</code> est l'&eacute;quivalent de <code class="code" id="rg8zwx_90">Promise.all</code> pour les <code class="code" id="rg8zwx_91">Observables</code>. Il prend un tableau (ou un dictionnaire) d'Observables et attend que <span class="control" id="rg8zwx_92">tous</span> se terminent (<code class="code" id="rg8zwx_93">complete</code>). Une fois que c'est le cas, il &eacute;met une <span class="control" id="rg8zwx_94">seule valeur</span>: un tableau (ou un dictionnaire) contenant la <span class="control" id="rg8zwx_95">derni&egrave;re valeur</span> de chaque <code class="code" id="rg8zwx_96">Observable</code> source.</p><p id="rg8zwx_85">Id&eacute;al pour les appels de &quot;setup&quot; : charger toutes les donn&eacute;es initiales d'une page en parall&egrave;le.</p><aside class="prompt" data-type="warning" data-title="" id="rg8zwx_86"><p>**Attention :** Si l'un des `Observables` dans `forkJoin` &eacute;met une erreur, l'ensemble du `forkJoin` &eacute;choue imm&eacute;diatement et vous ne recevrez les r&eacute;sultats d'aucun des autres. Vous devez g&eacute;rer les erreurs sur les flux internes si vous voulez &eacute;viter ce comportement.</p></aside><div class="code-block" data-lang="ts" data-title="TypeScript">
import {forkJoin} from 'rxjs';
import {map} from 'rxjs/operators';

const user$ = this.http.get('/api/user/1');
const products$ = this.http.get('/api/products');
const settings$ = this.http.get('/api/settings');

forkJoin({
    user: user$,
    products: products$,
    settings: settings$
}).pipe(
    map(({user, products, settings}) =&gt; {
        // Travailler avec les trois résultats en même temps
        return {...user, preferredTheme: settings.theme, topProduct: products[0]};
    })
).subscribe(viewModel =&gt; console.log(viewModel));
</div><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="898px" preserveAspectRatio="none" style="width:855px;height:898px;background:#FFFFFF;" version="1.1" viewBox="0 0 855 898" width="855px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="343" x="253.25" y="28.5352">Diagramme de s&#233;quence pour forkJoin([A, B, C])</text><rect fill="#ADD8E6" height="848.6719" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="504" x="345.5" y="43.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="149" x="523" y="56.0566">Ex&#233;cution en Parall&#232;le</text><rect fill="#FFFFFF" height="714.0742" style="stroke:#696969;stroke-width:1.0;" width="10" x="300.5" y="125.5977"/><rect fill="#FFFFFF" height="217.1738" style="stroke:#696969;stroke-width:1.0;" width="10" x="427.5" y="220.8398"/><rect fill="#FFFFFF" height="464.9688" style="stroke:#696969;stroke-width:1.0;" width="10" x="593.5" y="250.1504"/><rect fill="#FFFFFF" height="326.416" style="stroke:#696969;stroke-width:1.0;" width="10" x="758.5" y="279.4609"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="72" x2="72" y1="94.2871" y2="857.6719"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="305.5" x2="305.5" y1="94.2871" y2="857.6719"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="432.5" x2="432.5" y1="94.2871" y2="857.6719"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="598.5" x2="598.5" y1="94.2871" y2="857.6719"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="763.5" x2="763.5" y1="94.2871" y2="857.6719"/><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="135" x="5" y="62.7988"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="12" y="83.334">Observateur Final</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="135" x="5" y="856.6719"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="12" y="877.207">Observateur Final</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="68" x="271.5" y="62.7988"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="278.5" y="83.334">forkJoin</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="68" x="271.5" y="856.6719"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="278.5" y="877.207">forkJoin</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="166" x="349.5" y="62.7988"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="356.5" y="83.334">Observable A (Rapide)</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="166" x="349.5" y="856.6719"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="356.5" y="877.207">Observable A (Rapide)</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="146" x="525.5" y="62.7988"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="532.5" y="83.334">Observable B (Lent)</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="146" x="525.5" y="856.6719"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="532.5" y="877.207">Observable B (Lent)</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="164" x="681.5" y="62.7988"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="688.5" y="83.334">Observable C (Moyen)</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="164" x="681.5" y="856.6719"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="688.5" y="877.207">Observable C (Moyen)</text><rect fill="#FFFFFF" height="714.0742" style="stroke:#696969;stroke-width:1.0;" width="10" x="300.5" y="125.5977"/><rect fill="#FFFFFF" height="217.1738" style="stroke:#696969;stroke-width:1.0;" width="10" x="427.5" y="220.8398"/><rect fill="#FFFFFF" height="464.9688" style="stroke:#696969;stroke-width:1.0;" width="10" x="593.5" y="250.1504"/><rect fill="#FFFFFF" height="326.416" style="stroke:#696969;stroke-width:1.0;" width="10" x="758.5" y="279.4609"/><polygon fill="#454645" points="288.5,121.5977,298.5,125.5977,288.5,129.5977,292.5,125.5977" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="72.5" x2="294.5" y1="125.5977" y2="125.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="79.5" y="120.8555">subscribe()</text><path d="M231,142.0977 L231,190.0977 A3.5,3.5 0 0 0 234.5,193.5977 L376.5,193.5977 A3.5,3.5 0 0 0 380,190.0977 L380,148.5977 L370,138.5977 L234.5,138.5977 A3.5,3.5 0 0 0 231,142.0977 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M370,138.5977 L370,146.8477 A1.75,1.75 0 0 0 371.75,148.5977 L380,148.5977 L370,138.5977 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="237" y="156.166">S'abonne &#224; tous les</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="237" y="171.4766">observables sources</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="237" y="186.7871">simultan&#233;ment.</text><polygon fill="#454645" points="415.5,216.8398,425.5,220.8398,415.5,224.8398,419.5,220.8398" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="310.5" x2="421.5" y1="220.8398" y2="220.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="317.5" y="216.0977">subscribe()</text><polygon fill="#454645" points="581.5,246.1504,591.5,250.1504,581.5,254.1504,585.5,250.1504" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="310.5" x2="587.5" y1="250.1504" y2="250.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="317.5" y="245.4082">subscribe()</text><polygon fill="#454645" points="746.5,275.4609,756.5,279.4609,746.5,283.4609,750.5,279.4609" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="310.5" x2="752.5" y1="279.4609" y2="279.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="317.5" y="274.7188">subscribe()</text><polygon fill="#454645" points="321.5,304.7715,311.5,308.7715,321.5,312.7715,317.5,308.7715" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="315.5" x2="426.5" y1="308.7715" y2="308.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="327.5" y="304.0293">&#233;met 'A1'</text><path d="M442,325.2715 L442,343.2715 A3.5,3.5 0 0 0 445.5,346.7715 L693.5,346.7715 A3.5,3.5 0 0 0 697,343.2715 L697,331.7715 L687,321.7715 L445.5,321.7715 A3.5,3.5 0 0 0 442,325.2715 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M687,321.7715 L687,330.0215 A1.75,1.75 0 0 0 688.75,331.7715 L697,331.7715 L687,321.7715 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="448" y="339.3398">forkJoin garde 'A1' en m&#233;moire temp.</text><polygon fill="#454645" points="321.5,369.3926,311.5,373.3926,321.5,377.3926,317.5,373.3926" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="315.5" x2="426.5" y1="373.3926" y2="373.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="327.5" y="368.6504">&#233;met 'A-Last'</text><path d="M442,389.8926 L442,407.8926 A3.5,3.5 0 0 0 445.5,411.3926 L674.5,411.3926 A3.5,3.5 0 0 0 678,407.8926 L678,396.3926 L668,386.3926 L445.5,386.3926 A3.5,3.5 0 0 0 442,389.8926 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M668,386.3926 L668,394.6426 A1.75,1.75 0 0 0 669.75,396.3926 L678,396.3926 L668,386.3926 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="448" y="403.9609">forkJoin remplace 'A1' par 'A-Last'</text><polygon fill="#454645" points="321.5,434.0137,311.5,438.0137,321.5,442.0137,317.5,438.0137" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="315.5" x2="431.5" y1="438.0137" y2="438.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="327.5" y="433.2715">complete()</text><line style="stroke:#696969;stroke-width:2.0;" x1="423.5" x2="441.5" y1="429.0137" y2="447.0137"/><line style="stroke:#696969;stroke-width:2.0;" x1="423.5" x2="441.5" y1="447.0137" y2="429.0137"/><path d="M163,454.5137 L163,487.5137 A3.5,3.5 0 0 0 166.5,491.0137 L443.5,491.0137 A3.5,3.5 0 0 0 447,487.5137 L447,461.0137 L437,451.0137 L166.5,451.0137 A3.5,3.5 0 0 0 163,454.5137 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M437,451.0137 L437,459.2637 A1.75,1.75 0 0 0 438.75,461.0137 L447,461.0137 L437,451.0137 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="169" y="468.582">A termin&#233;. Valeur finale retenue : 'A-Last'.</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="169" y="483.8926">En attente de B et C.</text><polygon fill="#454645" points="321.5,513.9453,311.5,517.9453,321.5,521.9453,317.5,517.9453" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="315.5" x2="757.5" y1="517.9453" y2="517.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="327.5" y="513.2031">&#233;met 'C1'</text><polygon fill="#454645" points="321.5,543.2559,311.5,547.2559,321.5,551.2559,317.5,547.2559" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="315.5" x2="757.5" y1="547.2559" y2="547.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="327.5" y="542.5137">&#233;met 'C2'</text><polygon fill="#454645" points="321.5,572.5664,311.5,576.5664,321.5,580.5664,317.5,576.5664" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="315.5" x2="757.5" y1="576.5664" y2="576.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="327.5" y="571.8242">&#233;met 'C-Last'</text><polygon fill="#454645" points="321.5,601.877,311.5,605.877,321.5,609.877,317.5,605.877" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="315.5" x2="762.5" y1="605.877" y2="605.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="327.5" y="601.1348">complete()</text><line style="stroke:#696969;stroke-width:2.0;" x1="754.5" x2="772.5" y1="596.877" y2="614.877"/><line style="stroke:#696969;stroke-width:2.0;" x1="754.5" x2="772.5" y1="614.877" y2="596.877"/><path d="M163,622.377 L163,655.377 A3.5,3.5 0 0 0 166.5,658.877 L443.5,658.877 A3.5,3.5 0 0 0 447,655.377 L447,628.877 L437,618.877 L166.5,618.877 A3.5,3.5 0 0 0 163,622.377 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M437,618.877 L437,627.127 A1.75,1.75 0 0 0 438.75,628.877 L447,628.877 L437,618.877 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="169" y="636.4453">C termin&#233;. Valeur finale retenue : 'C-Last'.</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="169" y="651.7559">En attente de B.</text><polygon fill="#454645" points="321.5,681.8086,311.5,685.8086,321.5,689.8086,317.5,685.8086" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="315.5" x2="592.5" y1="685.8086" y2="685.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="327.5" y="681.0664">&#233;met 'B-Last'</text><polygon fill="#454645" points="321.5,711.1191,311.5,715.1191,321.5,719.1191,317.5,715.1191" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="315.5" x2="597.5" y1="715.1191" y2="715.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="327.5" y="710.377">complete()</text><line style="stroke:#696969;stroke-width:2.0;" x1="589.5" x2="607.5" y1="706.1191" y2="724.1191"/><line style="stroke:#696969;stroke-width:2.0;" x1="589.5" x2="607.5" y1="724.1191" y2="706.1191"/><path d="M165,731.6191 L165,779.6191 A3.5,3.5 0 0 0 168.5,783.1191 L441.5,783.1191 A3.5,3.5 0 0 0 445,779.6191 L445,738.1191 L435,728.1191 L168.5,728.1191 A3.5,3.5 0 0 0 165,731.6191 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M435,728.1191 L435,736.3691 A1.75,1.75 0 0 0 436.75,738.1191 L445,738.1191 L435,728.1191 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="171" y="745.6875">TOUS</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="212" y="745.6875">les observables sont termin&#233;s.</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="259" x="171" y="760.998">forkJoin rassemble les derni&#232;res valeurs :</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="171" y="776.3086">['A-Last', 'B-Last', 'C-Last']</text><polygon fill="#454645" points="83.5,806.3613,73.5,810.3613,83.5,814.3613,79.5,810.3613" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="77.5" x2="299.5" y1="810.3613" y2="810.3613"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="89.5" y="805.6191">&#233;met ['A-Last', 'B-Last', 'C-Last']</text><polygon fill="#454645" points="83.5,835.6719,73.5,839.6719,83.5,843.6719,79.5,839.6719" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="77.5" x2="304.5" y1="839.6719" y2="839.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="89.5" y="834.9297">complete()</text><!--SRC=[hLNBRjim4BphAxRkmG_OAfBU0hI0f2Q78csA9kqbpO6IcOIeHAeaPIH_qsFo7Vgn3cbBWXBPCP3w89YhuJvcTrPlx2qlEAr4gfcqmPWkXDMSbXKj1RlHh2XuO8NDENrgphJaPEh7FnMN6QTILPgkbVxzMGavkOpc5CyfkPe6y1LbbbVQlFl6j1MPA17116LteD5PQhXUCGUZ4o5PFY9cQ6tbkezjWdZ8oUOGfEgEHiTtzMDMMQ4aSKa8n_AyViZvYDwUYfjR6-SL7moSeh289jzPAPPysWIFjc9ZcfnoQLjal1MPqEIBkkUoXIO1bqj2kewP3o__W3e8AKgLbEWGl0ifh63vdhSR3cdniIMBZiXKgScqIFba6h3C2iTzHsOW5OxANMjjHETZvhEW-YzPLHdAkO5PjSKQCfY2p5kDAAhSCba_kgH3NxJp6WHj5iZ8aRmj6z-09-1u1pX-2avsW9CzsT_QayEGVWgd0TCZO89wXJ6OG4EE054wQwbWSk-dhugAoul5Wdep2qFWMUptrz5kQHmTZDUzr6xyILqtZ3SYeXkceMC7T98fS4y92D_oeWntELwSCcDVSgxX9MVPnZyaqbtS-EuxpnJmtBfcWLYhrVrw2fwF8y0HajI5m8IX5Intg-FQhGxa0nUoui0quS9VybWIix1RlxXYGXL9E40f15jYM9sEiTe0nAXh33ssdD9ywWaVqrTaT0G1UA8mzsCi7bNXZ2ITC2Xb1llFPIGiiLBN3mOP5qmOOYldF0xyY0wocw1jEzuUxdox8NYDs8VVP9ZVP1z-asty3b6BhObdcVlLWUtP36yyN4dSLHBlLqdyAbLtuduVqlczp6wrai8m_ptPb8wyMeN_ZrY3YtOskpZxSJwRkGNxPBrYS9gkc13GJchC65uubXrmoRKKzOF6tvLldQ4Ze2yRFSnRTkTj3w-sx-Zr5wHfp0jUkhlzoxsMFV_c_0C0]--></g></svg></div></div><div class="tabs__content" data-gtm="tab" id="rg8zwx_83" data-title="combineLatest : Le Panneau de Contr&ocirc;le"><p id="rg8zwx_97"><code class="code" id="rg8zwx_100">combineLatest</code> est un autre outil de combinaison, mais avec un comportement tr&egrave;s diff&eacute;rent et tr&egrave;s r&eacute;actif. Il attend que chaque <code class="code" id="rg8zwx_101">Observable</code> source ait &eacute;mis au moins une fois. Ensuite, il &eacute;met une nouvelle valeur <span class="control" id="rg8zwx_102">chaque fois que l'un des <code class="code" id="rg8zwx_104">Observables</code> source &eacute;met</span>. La valeur &eacute;mise est un tableau contenant la <span class="control" id="rg8zwx_103">derni&egrave;re valeur de chaque source</span>.</p><p id="rg8zwx_98">C'est l'op&eacute;rateur parfait pour les sc&eacute;narios o&ugrave; la vue d&eacute;pend de plusieurs contr&ocirc;les qui peuvent changer ind&eacute;pendamment (filtres multiples, formulaires r&eacute;actifs, etc.).</p><div class="code-block" data-lang="ts" data-title="TypeScript">
import {combineLatest, fromEvent} from 'rxjs';
import {map, startWith} from 'rxjs/operators';

const filterBy$ = categoryFilter.valueChanges.pipe(startWith('all'));
const sortBy$ = sortOrder.valueChanges.pipe(startWith('date'));

combineLatest([
    filterBy$,
    sortBy$
]).pipe(
    map(([category, sortOrder]) =&gt; {
        // Dès que la catégorie OU l'ordre de tri change, 
        // on a les deux dernières valeurs pour relancer la recherche.
        return {category, sortOrder};
    })
).subscribe(filters =&gt; this.reloadData(filters));
</div></div></div></section><section class="chapter"><h2 id="exercice-1-2-le-dashboard-multi-sources" data-toc="exercice-1-2-le-dashboard-multi-sources">Exercice 1.2 : Le Dashboard Multi-Sources</h2><p id="rg8zwx_105"><span class="control" id="rg8zwx_109">Votre mission, si vous l'acceptez :</span> construire un dashboard qui charge trois types de donn&eacute;es en parall&egrave;le depuis un service. Le dashboard doit afficher un loader global pendant le chargement et g&eacute;rer gracieusement les erreurs si l'une des sources ne r&eacute;pond pas.</p><p id="rg8zwx_106"><span class="control" id="rg8zwx_110">Instructions :</span></p><ol class="list _decimal" id="rg8zwx_107" type="1"><li class="list__item" id="rg8zwx_111"><p id="rg8zwx_120"><span class="control" id="rg8zwx_122">Cr&eacute;ez un <code class="code" id="rg8zwx_123">DashboardService</code></span> avec 3 m&eacute;thodes :</p><ul class="list _bullet" id="rg8zwx_121"><li class="list__item" id="rg8zwx_124"><p id="rg8zwx_127"><code class="code" id="rg8zwx_128">getUserProfile()</code>: retourne un <code class="code" id="rg8zwx_129">Observable</code> d'un objet utilisateur apr&egrave;s 1s.</p></li><li class="list__item" id="rg8zwx_125"><p id="rg8zwx_130"><code class="code" id="rg8zwx_131">getSalesStats()</code>: retourne un <code class="code" id="rg8zwx_132">Observable</code> de statistiques apr&egrave;s 1.5s.</p></li><li class="list__item" id="rg8zwx_126"><p id="rg8zwx_133"><code class="code" id="rg8zwx_134">getSystemNotifications()</code>: <span class="control" id="rg8zwx_135">cette m&eacute;thode doit &eacute;chouer</span>. Elle retourne un <code class="code" id="rg8zwx_136">Observable</code> qui &eacute;met une erreur apr&egrave;s 0.5s (<code class="code" id="rg8zwx_137">throwError</code>).</p></li></ul></li><li class="list__item" id="rg8zwx_112"><p id="rg8zwx_138"><span class="control" id="rg8zwx_139">Cr&eacute;ez un <code class="code" id="rg8zwx_140">DashboardComponent</code></span>.</p></li><li class="list__item" id="rg8zwx_113"><p id="rg8zwx_141">Dans le composant, d&eacute;clarez une propri&eacute;t&eacute; <code class="code" id="rg8zwx_142">isLoading = false;</code> et une propri&eacute;t&eacute; pour stocker les donn&eacute;es du dashboard.</p></li><li class="list__item" id="rg8zwx_114"><p id="rg8zwx_143">Dans <code class="code" id="rg8zwx_144">ngOnInit</code>, mettez <code class="code" id="rg8zwx_145">isLoading</code> &agrave; <code class="code" id="rg8zwx_146">true</code>.</p></li><li class="list__item" id="rg8zwx_115"><p id="rg8zwx_147">Utilisez <code class="code" id="rg8zwx_148">forkJoin</code> pour appeler les 3 m&eacute;thodes du service.</p></li><li class="list__item" id="rg8zwx_116"><p id="rg8zwx_149"><span class="control" id="rg8zwx_150">Le point crucial :</span> Chaque <code class="code" id="rg8zwx_151">Observable</code> pass&eacute; &agrave; <code class="code" id="rg8zwx_152">forkJoin</code> doit avoir sa propre gestion d'erreur (<code class="code" id="rg8zwx_153">catchError</code>) pour retourner une valeur par d&eacute;faut (ex: <code class="code" id="rg8zwx_154">null</code> ou un objet d'erreur) afin d'emp&ecirc;cher le <code class="code" id="rg8zwx_155">forkJoin</code> global d'&eacute;chouer.</p></li><li class="list__item" id="rg8zwx_117"><p id="rg8zwx_156">Dans le <code class="code" id="rg8zwx_157">subscribe</code> de <code class="code" id="rg8zwx_158">forkJoin</code>, stockez les donn&eacute;es re&ccedil;ues.</p></li><li class="list__item" id="rg8zwx_118"><p id="rg8zwx_159">Utilisez <code class="code" id="rg8zwx_160">finalize</code> sur le <code class="code" id="rg8zwx_161">forkJoin</code> pour vous assurer que <code class="code" id="rg8zwx_162">isLoading</code> passe &agrave; <code class="code" id="rg8zwx_163">false</code> &agrave; la fin, que tout ait r&eacute;ussi ou non.</p></li><li class="list__item" id="rg8zwx_119"><p id="rg8zwx_164">Affichez les donn&eacute;es (ou un message d'erreur) et le loader dans le template.</p></li></ol><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="correction-exercice-1-2" data-toc="correction-exercice-1-2">Correction exercice 1.2</h3></div><div class="collapse__content"><section class="procedure-steps" id="rg8zwx_165"><p id="rg8zwx_166">Voici une solution robuste pour ce dashboard.</p><p id="rg8zwx_167"><span class="control" id="rg8zwx_171">1. Le <code class="code" id="rg8zwx_172">DashboardService</code></span></p><div class="code-block" data-lang="ts">
// src/app/dashboard.service.ts
import {Injectable} from '@angular/core';
import {Observable, of, throwError} from 'rxjs';
import {delay} from 'rxjs/operators';

@Injectable({
    providedIn: 'root'
})
export class DashboardService {

    getUserProfile(): Observable&lt;{ name: string; email: string }&gt; {
        return of({
            name: 'Alice',
            email: 'alice@example.com'
        }).pipe(delay(1000));
    }

    getSalesStats(): Observable&lt;{ revenue: number; newCustomers: number }&gt; {
        return of({
            revenue: 50000,
            newCustomers: 120
        }).pipe(delay(1500));
    }

    getSystemNotifications(): Observable&lt;{ count: number; messages: string[] }&gt; {
        // Simule une erreur de chargement des notifications
        return throwError(() =&gt; new Error('Notification service is down'))
            .pipe(delay(500));
    }
}
</div><p id="rg8zwx_169"><span class="control" id="rg8zwx_173">2. Le <code class="code" id="rg8zwx_174">DashboardComponent</code></span></p><div class="code-block" data-lang="ts">
// src/app/dashboard/dashboard.component.ts
import {Component, OnInit, inject} from '@angular/core';
import {CommonModule} from '@angular/common';
import {forkJoin, of} from 'rxjs';
import {catchError, finalize} from 'rxjs/operators';
import {DashboardService} from '../dashboard.service';

@Component({
    selector: 'app-dashboard',
    standalone: true,
    imports: [CommonModule],
    template: `
    &lt;h2&gt;Dashboard&lt;/h2&gt;
    &lt;div *ngIf=&quot;isLoading; else content&quot;&gt;Chargement des données...&lt;/div&gt;
    
    &lt;ng-template #content&gt;
      &lt;div class=&quot;card&quot;&gt;
        &lt;h3&gt;Profil Utilisateur&lt;/h3&gt;
        &lt;p *ngIf=&quot;dashboardData.userProfile&quot;&gt;
          {{ dashboardData.userProfile.name }}
        &lt;/p&gt;
        &lt;p class=&quot;error&quot; *ngIf=&quot;!dashboardData.userProfile&quot;&gt;
          Données indisponibles.
        &lt;/p&gt;
      &lt;/div&gt;
      
      &lt;div class=&quot;card&quot;&gt;
        &lt;h3&gt;Statistiques de Vente&lt;/h3&gt;
        &lt;p *ngIf=&quot;dashboardData.salesStats&quot;&gt;
          Revenu: {{ dashboardData.salesStats.revenue | currency }}
        &lt;/p&gt;
        &lt;p class=&quot;error&quot; *ngIf=&quot;!dashboardData.salesStats&quot;&gt;
          Données indisponibles.
        &lt;/p&gt;
      &lt;/div&gt;

      &lt;div class=&quot;card&quot;&gt;
        &lt;h3&gt;Notifications&lt;/h3&gt;
        &lt;p *ngIf=&quot;dashboardData.notifications&quot;&gt;
          {{ dashboardData.notifications.count }} messages
        &lt;/p&gt;
        &lt;p class=&quot;error&quot; *ngIf=&quot;!dashboardData.notifications&quot;&gt;
          Impossible de charger les notifications.
        &lt;/p&gt;
      &lt;/div&gt;
    &lt;/ng-template&gt;
  `,
    styles: [`.card { border: 1px solid #ccc; padding: 1rem; margin-bottom: 1rem; }
  .error { color: red; }`]
})
export class DashboardComponent implements OnInit {
    private dashboardService = inject(DashboardService);

    isLoading = false;
    dashboardData: any = {};

    ngOnInit(): void {
        this.loadDashboardData();
    }

    loadDashboardData(): void {
        this.isLoading = true;

        const userProfile$ = this.dashboardService.getUserProfile().pipe(
            catchError(err =&gt; of(null)) // En cas d'erreur, retourne null
        );

        const salesStats$ = this.dashboardService.getSalesStats().pipe(
            catchError(err =&gt; of(null))
        );

        const notifications$ = this.dashboardService.getSystemNotifications().pipe(
            catchError(err =&gt; {
                console.error(err); // On peut logger l'erreur
                return of(null); // Et continuer avec une valeur par défaut
            })
        );

        forkJoin({
            userProfile: userProfile$,
            salesStats: salesStats$,
            notifications: notifications$
        }).pipe(
            finalize(() =&gt; this.isLoading = false) // Sera toujours exécuté
        ).subscribe(data =&gt; {
            this.dashboardData = data;
        });
    }
}
</div><ol class="list _decimal"></ol></section></div></div></section></section><section class="chapter"><h2 id="auto-valuation" data-toc="auto-valuation">Auto-&eacute;valuation</h2><ol class="list _decimal" id="rg8zwx_175" type="1"><li class="list__item" id="rg8zwx_176"><p id="rg8zwx_181"><span class="control" id="rg8zwx_182">Dans un op&eacute;rateur <code class="code" id="rg8zwx_189">catchError</code>, que devez-vous absolument retourner pour que le flux continue sans propager l'erreur &agrave; l'abonn&eacute; ?</span> a. <code class="code" id="rg8zwx_183">null</code> ou <code class="code" id="rg8zwx_184">undefined</code>. b. Une cha&icirc;ne de caract&egrave;res d&eacute;crivant l'erreur. c. Un nouvel <code class="code" id="rg8zwx_185">Observable</code> (par exemple, cr&eacute;&eacute; avec <code class="code" id="rg8zwx_186">of()</code> ou <code class="code" id="rg8zwx_187">throwError()</code>). d. Rien, le simple fait d'utiliser <code class="code" id="rg8zwx_188">catchError</code> suffit.</p></li><li class="list__item" id="rg8zwx_177"><p id="rg8zwx_190"><span class="control" id="rg8zwx_191">D&eacute;crivez un sc&eacute;nario d'application concret o&ugrave; vous choisiriez <code class="code" id="rg8zwx_192">combineLatest</code> plut&ocirc;t que <code class="code" id="rg8zwx_193">forkJoin</code>, et expliquez pourquoi.</span></p></li><li class="list__item" id="rg8zwx_178"><p id="rg8zwx_194"><span class="control" id="rg8zwx_195">Vous avez une propri&eacute;t&eacute; <code class="code" id="rg8zwx_196">isSaving</code> dans votre composant, que vous mettez &agrave; <code class="code" id="rg8zwx_197">true</code> avant d'appeler un service pour sauvegarder un formulaire. Quel op&eacute;rateur RxJS est le plus appropri&eacute; pour garantir que <code class="code" id="rg8zwx_198">isSaving</code> repasse &agrave; <code class="code" id="rg8zwx_199">false</code> que la sauvegarde r&eacute;ussisse ou &eacute;choue ?</span></p></li><li class="list__item" id="rg8zwx_179"><p id="rg8zwx_200"><span class="control" id="rg8zwx_201">Si un des <code class="code" id="rg8zwx_207">Observable</code>s fournis &agrave; <code class="code" id="rg8zwx_208">forkJoin</code> ne se termine jamais (ne <code class="code" id="rg8zwx_209">complete</code> jamais), que se passe-t-il ?</span> a. <code class="code" id="rg8zwx_202">forkJoin</code> &eacute;met apr&egrave;s un certain timeout. b. <code class="code" id="rg8zwx_203">forkJoin</code> &eacute;met les valeurs de tous les <code class="code" id="rg8zwx_204">Observable</code>s qui se sont termin&eacute;s. c. <code class="code" id="rg8zwx_205">forkJoin</code> n'&eacute;mettra jamais de valeur. d. <code class="code" id="rg8zwx_206">forkJoin</code> &eacute;met une erreur.</p></li><li class="list__item" id="rg8zwx_180"><p id="rg8zwx_210"><span class="control" id="rg8zwx_211">Quel est le principal danger si vous oubliez de mettre un <code class="code" id="rg8zwx_212">catchError</code> sur les <code class="code" id="rg8zwx_213">Observable</code>s internes que vous passez &agrave; <code class="code" id="rg8zwx_214">forkJoin</code>?</span></p></li></ol></section><section class="chapter"><h2 id="conclusion" data-toc="conclusion">Conclusion</h2><p id="rg8zwx_215">F&eacute;licitations ! Vous avez ajout&eacute; &agrave; votre bo&icirc;te &agrave; outils RxJS des techniques avanc&eacute;es qui sont le pain quotidien des d&eacute;veloppeurs Angular exp&eacute;riment&eacute;s. Vous savez maintenant comment construire des cha&icirc;nes d'op&eacute;rateurs qui ne craignent pas les erreurs gr&acirc;ce &agrave; <code class="code" id="rg8zwx_217">catchError</code> et <code class="code" id="rg8zwx_218">retry</code>, et comment orchestrer des op&eacute;rations de nettoyage avec <code class="code" id="rg8zwx_219">finalize</code>. Plus important encore, vous savez comment composer des flux multiples avec <code class="code" id="rg8zwx_220">forkJoin</code> et <code class="code" id="rg8zwx_221">combineLatest</code> pour cr&eacute;er des exp&eacute;riences utilisateur riches et r&eacute;actives.</p><p id="rg8zwx_216">La prochaine grande question qui se pose est : maintenant que nous savons comment r&eacute;cup&eacute;rer et manipuler toutes ces donn&eacute;es, o&ugrave; les stockons-nous ? Comment partageons-nous cet &eacute;tat &agrave; travers diff&eacute;rents composants de mani&egrave;re propre et efficace ? C'est le d&eacute;fi de la <span class="control" id="rg8zwx_222">gestion d'&eacute;tat</span>, et ce sera le sujet de notre prochain module passionnant.</p></section><div class="last-modified">12 octobre 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="001-00-rxjs.html" class="navigation-links__prev">Module 1 : L'essentiel - Ma&icirc;trise de RxJS, le c&oelig;ur r&eacute;actif d'Angular</a><a href="002-00-state-management.html" class="navigation-links__next">Module 2 : L'essentiel - Strat&eacute;gies de Gestion d'&Eacute;tat (State Management)</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>