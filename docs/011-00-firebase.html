<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-10-14T11:35:41.560348"><title>Bonus 2 : Super-pouvoirs Backend avec Firebase (BaaS) - L'essentiel | Angular avancé</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction","level":0,"title":"Introduction","anchor":"#introduction"},{"id":"1-introduction-firebase-et-configuration-initiale","level":0,"title":"1. Introduction à Firebase et Configuration Initiale","anchor":"#1-introduction-firebase-et-configuration-initiale"},{"id":"2-firebase-authentication-la-gestion-des-utilisateurs-simplifi-e","level":0,"title":"2. Firebase Authentication : La Gestion des Utilisateurs Simplifiée","anchor":"#2-firebase-authentication-la-gestion-des-utilisateurs-simplifi-e"},{"id":"3-cloud-firestore-votre-base-de-donn-es-en-temps-r-el","level":0,"title":"3. Cloud Firestore : Votre Base de Données en Temps Réel","anchor":"#3-cloud-firestore-votre-base-de-donn-es-en-temps-r-el"},{"id":"exercice-10-1-une-shoutbox-en-temps-r-el","level":0,"title":"Exercice 10.1 : Une \"Shoutbox\" en Temps Réel","anchor":"#exercice-10-1-une-shoutbox-en-temps-r-el"},{"id":"conclusion","level":0,"title":"Conclusion","anchor":"#conclusion"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Bonus 2 : Super-pouvoirs Backend avec Firebase (BaaS) - L'essentiel | Angular avancé"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Angular avancé Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/011-00-firebase.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Bonus 2 : Super-pouvoirs Backend avec Firebase (BaaS) - L'essentiel | Angular avancé"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/011-00-firebase.html#webpage",
    "url": "writerside-documentation/011-00-firebase.html",
    "name": "Bonus 2 : Super-pouvoirs Backend avec Firebase (BaaS) - L'essentiel | Angular avancé",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Angular avancé Help"
}</script><!-- End Schema.org --></head><body data-id="011-00-firebase" data-main-title="Bonus 2 : Super-pouvoirs Backend avec Firebase (BaaS) - L'essentiel" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Angular avancé  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="011-00-firebase" id="011-00-firebase.md">Bonus 2 : Super-pouvoirs Backend avec Firebase (BaaS) - L'essentiel</h1><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs p&eacute;dagogiques</h2><p id="xjqtbs_10">&Agrave; la fin de cette partie, vous serez capable de :</p><ul class="list _bullet" id="xjqtbs_11"><li class="list__item" id="xjqtbs_12"><p id="xjqtbs_16"><span class="control" id="xjqtbs_17">Expliquer</span> ce qu'est Firebase et le concept de Backend-as-a-Service (BaaS).</p></li><li class="list__item" id="xjqtbs_13"><p id="xjqtbs_18"><span class="control" id="xjqtbs_19">Int&eacute;grer</span> Firebase &agrave; une application Angular en utilisant la biblioth&egrave;que <code class="code" id="xjqtbs_20">@angular/fire</code>.</p></li><li class="list__item" id="xjqtbs_14"><p id="xjqtbs_21"><span class="control" id="xjqtbs_22">Mettre en place</span> un syst&egrave;me d'authentification complet (inscription, connexion) avec Firebase Authentication.</p></li><li class="list__item" id="xjqtbs_15"><p id="xjqtbs_23"><span class="control" id="xjqtbs_24">Interagir</span> avec une base de donn&eacute;es NoSQL en temps r&eacute;el (Cloud Firestore) pour lire et &eacute;crire des donn&eacute;es.</p></li></ul></section><section class="chapter"><h2 id="introduction" data-toc="introduction">Introduction</h2><p id="xjqtbs_25">Vous avez b&acirc;ti une application frontend impressionnante. Mais toute application non-triviale a besoin d'un <span class="control" id="xjqtbs_28">backend</span>: un endroit pour stocker les donn&eacute;es des utilisateurs, g&eacute;rer l'authentification, etc. Traditionnellement, cela signifie d&eacute;velopper une application serveur s&eacute;par&eacute;e (en Node.js, Python, Java...), g&eacute;rer une base de donn&eacute;es, configurer des serveurs, et s'occuper de la s&eacute;curit&eacute; et de la scalabilit&eacute;. C'est un travail &agrave; part enti&egrave;re, complexe et chronophage.</p><p id="xjqtbs_26">Et s'il existait une autre solution ? Et si vous pouviez avoir un backend puissant, scalable et en temps r&eacute;el, sans &eacute;crire une seule ligne de code serveur ? C'est la promesse du <span class="control" id="xjqtbs_29">Backend-as-a-Service (BaaS)</span>, et <span class="control" id="xjqtbs_30">Firebase</span> est le roi incontest&eacute; de cette cat&eacute;gorie.</p><p id="xjqtbs_27">Firebase est une plateforme de d&eacute;veloppement d'applications de Google qui fournit une suite d'outils backend pr&ecirc;ts &agrave; l'emploi. Pour les d&eacute;veloppeurs Angular, c'est une combinaison parfaite. Dans ce module, nous allons d&eacute;couvrir comment int&eacute;grer Firebase pour ajouter, en quelques heures, des fonctionnalit&eacute;s qui prendraient des semaines &agrave; d&eacute;velopper de mani&egrave;re traditionnelle. Pr&eacute;parez-vous &agrave; d&eacute;bloquer des super-pouvoirs pour vos applications.</p></section><section class="chapter"><h2 id="1-introduction-firebase-et-configuration-initiale" data-toc="1-introduction-firebase-et-configuration-initiale">1. Introduction &agrave; Firebase et Configuration Initiale</h2><p id="xjqtbs_31">Firebase est un &eacute;cosyst&egrave;me complet. Nous allons nous concentrer sur ses services les plus populaires :</p><ul class="list _bullet" id="xjqtbs_32"><li class="list__item" id="xjqtbs_34"><p id="xjqtbs_38"><span class="control" id="xjqtbs_39">Firebase Authentication :</span> Un service complet pour g&eacute;rer les utilisateurs.</p></li><li class="list__item" id="xjqtbs_35"><p id="xjqtbs_40"><span class="control" id="xjqtbs_41">Cloud Firestore :</span> Une base de donn&eacute;es NoSQL, flexible, scalable et en temps r&eacute;el.</p></li><li class="list__item" id="xjqtbs_36"><p id="xjqtbs_42"><span class="control" id="xjqtbs_43">Firebase Hosting :</span> Un service d'h&eacute;bergement ultra-rapide pour vos contenus statiques.</p></li><li class="list__item" id="xjqtbs_37"><p id="xjqtbs_44"><span class="control" id="xjqtbs_45">Cloud Functions :</span> Pour ex&eacute;cuter du code backend sans serveur lorsque vous en avez vraiment besoin.</p></li></ul><section class="chapter"><h3 id="installation-et-connexion" data-toc="installation-et-connexion">Installation et Connexion</h3><p id="xjqtbs_46">L'int&eacute;gration est grandement facilit&eacute;e par la biblioth&egrave;que officielle <code class="code" id="xjqtbs_48">@angular/fire</code>.</p><section class="procedure-steps"><h3 id="xjqtbs_47" data-toc="xjqtbs_47">Configuration de Firebase dans un projet Angular</h3><ol class="list _decimal" id="xjqtbs_49" type="1"><li class="list__item" id="xjqtbs_50"><p><b id="xjqtbs_53">Cr&eacute;er un projet sur la console Firebase :</b></p><p id="xjqtbs_54">Rendez-vous sur <a href="https://console.firebase.google.com/" id="xjqtbs_55" data-external="true" rel="noopener noreferrer" target="_blank">console.firebase.google.com</a>, cr&eacute;ez un nouveau projet, et suivez les instructions pour cr&eacute;er une application &quot;Web&quot; (ic&ocirc;ne <code class="code" id="xjqtbs_56">&lt;/&gt;</code>). Firebase vous fournira un objet de configuration (<code class="code" id="xjqtbs_57">firebaseConfig</code>) contenant vos cl&eacute;s API. Copiez-le.</p></li><li class="list__item" id="xjqtbs_51"><p><b id="xjqtbs_58">Ajouter <code class="code" id="xjqtbs_62">@angular/fire</code> au projet :</b></p><p id="xjqtbs_59">Dans votre terminal, &agrave; la racine de votre projet Angular, lancez la commande magique :</p><p id="xjqtbs_60"><code class="code" id="xjqtbs_63">ng add @angular/fire</code></p><p id="xjqtbs_61">Cette commande va vous poser des questions, installer les d&eacute;pendances, et surtout, cr&eacute;er et remplir vos fichiers d'environnement (`src/environments/environment.ts`) avec la configuration Firebase.</p></li><li class="list__item" id="xjqtbs_52"><p><b id="xjqtbs_64">Configurer les providers dans <code class="code" id="xjqtbs_67">app.config.ts</code>:</b></p><p id="xjqtbs_65"><code class="code" id="xjqtbs_68">ng add</code> fait la plupart du travail, mais il est bon de comprendre ce qu'il se passe. Le provider <code class="code" id="xjqtbs_69">provideFirebaseApp</code> initialise la connexion, et ensuite vous importez les providers pour chaque service que vous souhaitez utiliser.</p><div class="code-block" data-lang="ts">
// src/app/app.config.ts
import {ApplicationConfig, importProvidersFrom} from '@angular/core';
import {initializeApp, provideFirebaseApp} from '@angular/fire/app';
import {getAuth, provideAuth} from '@angular/fire/auth';
import {getFirestore, provideFirestore} from '@angular/fire/firestore';
import {environment} from '../environments/environment';

export const appConfig: ApplicationConfig = {
    providers: [
        // Initialise la connexion à Firebase
        importProvidersFrom(provideFirebaseApp(() =&gt;
            initializeApp(environment.firebase))
        ),
        // Rend le service d'authentification disponible
        importProvidersFrom(provideAuth(() =&gt; getAuth())),
        // Rend le service Firestore disponible
        importProvidersFrom(provideFirestore(() =&gt; getFirestore())),
    ]
};
</div></li></ol><ol class="list _decimal"></ol></section></section></section><section class="chapter"><h2 id="2-firebase-authentication-la-gestion-des-utilisateurs-simplifi-e" data-toc="2-firebase-authentication-la-gestion-des-utilisateurs-simplifi-e">2. Firebase Authentication : La Gestion des Utilisateurs Simplifi&eacute;e</h2><p id="xjqtbs_70">Oubliez la gestion des mots de passe, des sels, du hachage. Firebase s'occupe de tout.</p><section class="chapter"><h3 id="activer-un-fournisseur-d-authentification" data-toc="activer-un-fournisseur-d-authentification">Activer un Fournisseur d'Authentification</h3><p id="xjqtbs_73">Dans la console Firebase, allez dans la section &quot;Authentication&quot;, onglet &quot;Sign-in method&quot;, et activez les fournisseurs que vous souhaitez, par exemple &quot;E-mail/Mot de passe&quot;.</p></section><section class="chapter"><h3 id="utilisation-dans-angular" data-toc="utilisation-dans-angular">Utilisation dans Angular</h3><p id="xjqtbs_74">Le service <code class="code" id="xjqtbs_77">Auth</code> de <code class="code" id="xjqtbs_78">@angular/fire</code> expose des fonctions simples qui retournent des <code class="code" id="xjqtbs_79">Promises</code>.</p><div class="code-block" data-lang="ts">
// src/app/auth/auth.service.ts
import {Injectable, inject} from '@angular/core';
import {Auth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, authState, User}
    from '@angular/fire/auth';
import {Observable} from 'rxjs';

@Injectable({providedIn: 'root'})
export class Firebase_AuthService {
    private auth: Auth = inject(Auth);

    // Le plus important : un Observable qui émet l'utilisateur
    // connecté ou null. C'est notre source de vérité !
    public readonly user$: Observable&lt;User | null&gt; = authState(this.auth);

    register({email, password}) {
        return createUserWithEmailAndPassword(this.auth, email, password);
    }

    login({email, password}) {
        return signInWithEmailAndPassword(this.auth, email, password);
    }

    logout() {
        return signOut(this.auth);
    }
}
</div><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="453px" preserveAspectRatio="none" style="width:736px;height:453px;background:#FFFFFF;" version="1.1" viewBox="0 0 736 453" width="736px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="146.5527" style="stroke:#696969;stroke-width:1.0;" width="10" x="301" y="142.1094"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#696969;stroke-width:1.0;" width="10" x="497" y="171.4199"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#696969;stroke-width:1.0;" width="10" x="659" y="200.7305"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="81.4883" y2="372.5938"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="168" x2="168" y1="81.4883" y2="372.5938"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="306" x2="306" y1="81.4883" y2="372.5938"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="501.5" x2="501.5" y1="81.4883" y2="372.5938"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="663.5" x2="663.5" y1="81.4883" y2="372.5938"/><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="78.5352">User</text><ellipse cx="23.5" cy="13.5" fill="#454645" rx="8" ry="8" style="stroke:#454645;stroke-width:0.5;"/><path d="M23.5,21.5 L23.5,48.5 M10.5,29.5 L36.5,29.5 M23.5,48.5 L10.5,63.5 M23.5,48.5 L36.5,63.5 " fill="none" style="stroke:#454645;stroke-width:0.5;"/><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="385.1289">User</text><ellipse cx="23.5" cy="396.582" fill="#454645" rx="8" ry="8" style="stroke:#454645;stroke-width:0.5;"/><path d="M23.5,404.582 L23.5,431.582 M10.5,412.582 L36.5,412.582 M23.5,431.582 L10.5,446.582 M23.5,431.582 L36.5,446.582 " fill="none" style="stroke:#454645;stroke-width:0.5;"/><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="95" x="121" y="50"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="128" y="70.5352">Component</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="95" x="121" y="371.5938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="128" y="392.1289">Component</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="160" x="226" y="50"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="233" y="70.5352">Firebase_AuthService</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="160" x="226" y="371.5938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="233" y="392.1289">Firebase_AuthService</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="147" x="428.5" y="50"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="435.5" y="70.5352">@angular/fire/auth</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="147" x="428.5" y="371.5938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="435.5" y="392.1289">@angular/fire/auth</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="133" x="597.5" y="50"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="604.5" y="70.5352">Firebase Backend</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="133" x="597.5" y="371.5938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="604.5" y="392.1289">Firebase Backend</text><rect fill="#FFFFFF" height="146.5527" style="stroke:#696969;stroke-width:1.0;" width="10" x="301" y="142.1094"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#696969;stroke-width:1.0;" width="10" x="497" y="171.4199"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#696969;stroke-width:1.0;" width="10" x="659" y="200.7305"/><polygon fill="#222222" points="156.5,108.7988,166.5,112.7988,156.5,116.7988,160.5,112.7988" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="23.5" x2="162.5" y1="112.7988" y2="112.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="30.5" y="108.0566">soumet email/pass</text><polygon fill="#222222" points="289,138.1094,299,142.1094,289,146.1094,293,142.1094" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="168.5" x2="295" y1="142.1094" y2="142.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="175.5" y="137.3672">register(...)</text><polygon fill="#222222" points="485,167.4199,495,171.4199,485,175.4199,489,171.4199" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="311" x2="491" y1="171.4199" y2="171.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="318" y="166.6777">createUserWith...()</text><polygon fill="#222222" points="647,196.7305,657,200.7305,647,204.7305,651,200.7305" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;" x1="507" x2="653" y1="200.7305" y2="200.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="514" y="195.9883">Requ&#234;te d'inscription</text><polygon fill="#222222" points="518,226.041,508,230.041,518,234.041,514,230.041" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="512" x2="663" y1="230.041" y2="230.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="524" y="225.2988">Succ&#232;s / Erreur</text><polygon fill="#222222" points="322,255.3516,312,259.3516,322,263.3516,318,259.3516" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="316" x2="501" y1="259.3516" y2="259.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="328" y="254.6094">Promise&lt;UserCredential&gt;</text><polygon fill="#222222" points="179.5,284.6621,169.5,288.6621,179.5,292.6621,175.5,288.6621" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#222222;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="173.5" x2="305" y1="288.6621" y2="288.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="185.5" y="283.9199">Promise&lt;...&gt;</text><path d="M52,305.1621 L52,353.1621 A3.5,3.5 0 0 0 55.5,356.6621 L280.5,356.6621 A3.5,3.5 0 0 0 284,353.1621 L284,311.6621 L274,301.6621 L55.5,301.6621 A3.5,3.5 0 0 0 52,305.1621 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M274,301.6621 L274,309.9121 A1.75,1.75 0 0 0 275.75,311.6621 L284,311.6621 L274,301.6621 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="58" y="319.2305">Le composant r&#233;agit</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="58" y="334.541">automatiquement au changement</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="58" y="349.8516">d'&#233;tat via l'observable `user$`.</text><!--SRC=[RL91JWCn3Bpd5QOW5Gwq4aU44BIY9uGG5U88RjQqLdUJnSak1yH_AD_ent0geDd2djR9p6GyzbvSK4NGyapGHHEMx6eKh23GIqFE4hoPIn7_ElQb5zW_sNpctQ2DMjy74gE4o9Ph5O3Us5UrT-HYhti-OQ4P1dgyRE9YIjAofHvWWApkCYxGpPiIPVYir24gR8E_cIUfnFh_0HYXNP8hDk39wF6xD2PvXUDp-7K8fn1yKr44gf3BOOqXcEsjGZDl2XQQSuWaXuF1u2W5m2r6wZIG4vI_zQfqAwJmvEA1uq8r3ZEHhAkCf1BR3bJYJeUo_bHuqMSNh70TsRkjIjPknZlUTJ9jh5r_11Z2bGWrOWhwJo8tyYUCM_4L1pfB_Oo52asCiJpFfRAUEhdipE17IHFfqFDSZVDwubkTu2_LN1FOL8GqVrclSCxHw9xu2YFhzbP97nkm2zsaJMMA_deLCUg-8vHzFrFpBSvAWgT6Vm-U1YO5bXxx0W00]--></g></svg></div></section></section><section class="chapter"><h2 id="3-cloud-firestore-votre-base-de-donn-es-en-temps-r-el" data-toc="3-cloud-firestore-votre-base-de-donn-es-en-temps-r-el">3. Cloud Firestore : Votre Base de Donn&eacute;es en Temps R&eacute;el</h2><p id="xjqtbs_80">Firestore est une base de donn&eacute;es NoSQL. Au lieu de tables et de lignes, elle est organis&eacute;e en <span class="control" id="xjqtbs_83">collections</span> et * <span class="emphasis" id="xjqtbs_84">documents</span>*.</p><ul class="list _bullet" id="xjqtbs_81"><li class="list__item" id="xjqtbs_85"><p id="xjqtbs_87">Une <span class="control" id="xjqtbs_88">collection</span> est un conteneur d'objets (ex: <code class="code" id="xjqtbs_89">users</code>, <code class="code" id="xjqtbs_90">products</code>).</p></li><li class="list__item" id="xjqtbs_86"><p id="xjqtbs_91">Un <span class="control" id="xjqtbs_92">document</span> est un objet JSON-like &agrave; l'int&eacute;rieur d'une collection, avec son propre ID.</p></li></ul><section class="chapter"><h3 id="lire-et-crire-des-donn-es" data-toc="lire-et-crire-des-donn-es">Lire et &Eacute;crire des Donn&eacute;es</h3><p id="xjqtbs_93"><code class="code" id="xjqtbs_96">@angular/fire</code> transforme la complexit&eacute; de Firestore en <code class="code" id="xjqtbs_97">Observables</code> RxJS faciles &agrave; utiliser.</p><div class="code-block" data-lang="ts">
// src/app/services/data.service.ts
import {Injectable, inject} from '@angular/core';
import {Firestore, collection, collectionData, doc, docData, addDoc, updateDoc, deleteDoc}
    from '@angular/fire/firestore';
import {Observable} from 'rxjs';

export interface Item {
    id?: string;
    name: string;
    // ... autres champs
}

@Injectable({providedIn: 'root'})
export class DataService {
    private firestore: Firestore = inject(Firestore);

    // Lire une collection entière EN TEMPS RÉEL
    getItems(): Observable&lt;Item[]&gt; {
        const itemsCollection = collection(this.firestore, 'items');
        // 'idField' permet de récupérer l'ID du document dans l'objet
        return collectionData(itemsCollection, {idField: 'id'}) as Observable&lt;Item[]&gt;;
    }

    // Lire un seul document
    getItem(id: string): Observable&lt;Item&gt; {
        const itemDoc = doc(this.firestore, `items/${id}`);
        return docData(itemDoc) as Observable&lt;Item&gt;;
    }

    // Ajouter un document
    addItem(item: Item) {
        const itemsCollection = collection(this.firestore, 'items');
        return addDoc(itemsCollection, item); // Retourne une Promise
    }

    // Mettre à jour un document
    updateItem(id: string, data: Partial&lt;Item&gt;) {
        const itemDoc = doc(this.firestore, `items/${id}`);
        return updateDoc(itemDoc, data);
    }

    // Supprimer un document
    deleteItem(id: string) {
        const itemDoc = doc(this.firestore, `items/${id}`);
        return deleteDoc(itemDoc);
    }
}
</div><aside class="prompt" data-type="warning" data-title="Règles de Sécurité : La Clé de Voûte" id="xjqtbs_95"><p>Par d&eacute;faut, votre base de donn&eacute;es Firestore est ouverte au monde entier. C'est pratique pour d&eacute;marrer, mais **extr&ecirc;mement dangereux** en production. Vous devez absolument configurer les **R&egrave;gles de S&eacute;curit&eacute;** dans la console Firebase pour d&eacute;finir qui a le droit de lire et d'&eacute;crire dans quelles collections. Par exemple : `allow read, write: if request.auth.uid != null;` (seuls les utilisateurs connect&eacute;s peuvent lire/&eacute;crire).</p></aside></section></section><section class="chapter"><h2 id="exercice-10-1-une-shoutbox-en-temps-r-el" data-toc="exercice-10-1-une-shoutbox-en-temps-r-el">Exercice 10.1 : Une &quot;Shoutbox&quot; en Temps R&eacute;el</h2><p id="xjqtbs_98"><span class="control" id="xjqtbs_102">Objectif :</span> Cr&eacute;er une simple bo&icirc;te &agrave; messages o&ugrave; les messages de tous les utilisateurs apparaissent en temps r&eacute;el, en utilisant Firestore.</p><p id="xjqtbs_99"><span class="control" id="xjqtbs_103">Instructions :</span></p><ol class="list _decimal" id="xjqtbs_100" type="1"><li class="list__item" id="xjqtbs_104"><p id="xjqtbs_109">Dans la console Firebase, allez dans &quot;Firestore Database&quot;, cr&eacute;ez une base de donn&eacute;es, et d&eacute;marrez en <span class="control" id="xjqtbs_110">mode test</span> ( qui autorise les lectures/&eacute;critures pour 30 jours).</p></li><li class="list__item" id="xjqtbs_105"><p id="xjqtbs_111">Cr&eacute;ez un <code class="code" id="xjqtbs_112">DataService</code> similaire &agrave; celui ci-dessus, mais pour une collection <code class="code" id="xjqtbs_113">messages</code>. Un message aura une structure <code class="code" id="xjqtbs_114">{ text: string, timestamp: any }</code>.</p></li><li class="list__item" id="xjqtbs_106"><p id="xjqtbs_115">Cr&eacute;ez un <code class="code" id="xjqtbs_116">ShoutboxComponent</code>.</p></li><li class="list__item" id="xjqtbs_107"><p id="xjqtbs_117">Dans ce composant :</p><ul class="list _bullet" id="xjqtbs_118"><li class="list__item" id="xjqtbs_119"><p id="xjqtbs_122">Injectez <code class="code" id="xjqtbs_123">DataService</code>.</p></li><li class="list__item" id="xjqtbs_120"><p id="xjqtbs_124">Dans <code class="code" id="xjqtbs_125">ngOnInit</code>, appelez la m&eacute;thode pour r&eacute;cup&eacute;rer tous les messages et stockez l'observable.</p></li><li class="list__item" id="xjqtbs_121"><p id="xjqtbs_126">Ajoutez une m&eacute;thode pour envoyer un nouveau message en utilisant <code class="code" id="xjqtbs_127">dataService.addItem()</code>. N'oubliez pas d'ajouter un <code class="code" id="xjqtbs_128">timestamp</code> (ex: <code class="code" id="xjqtbs_129">serverTimestamp()</code> de Firestore).</p></li></ul></li><li class="list__item" id="xjqtbs_108"><p id="xjqtbs_130">Dans le template :</p><ul class="list _bullet" id="xjqtbs_131"><li class="list__item" id="xjqtbs_132"><p id="xjqtbs_134">Utilisez <code class="code" id="xjqtbs_135">@for</code> et le pipe <code class="code" id="xjqtbs_136">async</code> pour afficher la liste des messages.</p></li><li class="list__item" id="xjqtbs_133"><p id="xjqtbs_137">Ajoutez un champ de saisie et un bouton pour que l'utilisateur puisse poster un nouveau message.</p></li></ul></li></ol><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="correction-exercice-10-1" data-toc="correction-exercice-10-1">Correction exercice 10.1</h3></div><div class="collapse__content"><section class="procedure-steps" id="xjqtbs_138"><p id="xjqtbs_139">Voici une impl&eacute;mentation compl&egrave;te de la Shoutbox.</p><p id="xjqtbs_140"><span class="control" id="xjqtbs_144">1. Le <code class="code" id="xjqtbs_145">MessageService</code> (&eacute;quivalent de <code class="code" id="xjqtbs_146">DataService</code>)</span></p><div class="code-block" data-lang="ts">
// src/app/services/message.service.ts
import {Injectable, inject} from '@angular/core';
import {Firestore, collection, collectionData, addDoc, serverTimestamp, orderBy, query}
    from '@angular/fire/firestore';
import {Observable} from 'rxjs';

export interface Message {
    id?: string;
    text: string;
    timestamp: any; // Firestore gère un type spécial pour ça
}

@Injectable({providedIn: 'root'})
export class MessageService {
    private firestore: Firestore = inject(Firestore);

    getMessages(): Observable&lt;Message[]&gt; {
        const messagesCollection = collection(this.firestore, 'messages');
        // On crée une requête pour trier par date
        const q = query(messagesCollection, orderBy('timestamp', 'desc'));
        return collectionData(q, {idField: 'id'}) as Observable&lt;Message[]&gt;;
    }

    addMessage(text: string) {
        const messagesCollection = collection(this.firestore, 'messages');
        return addDoc(messagesCollection, {
            text: text,
            timestamp: serverTimestamp() // timestamp généré par le serveur
        });
    }
}
</div><p id="xjqtbs_142"><span class="control" id="xjqtbs_147">2. Le <code class="code" id="xjqtbs_148">shoutbox.component.ts</code></span></p><div class="code-block" data-lang="ts">
// src/app/shoutbox/shoutbox.component.ts
import {Component, OnInit, inject} from '@angular/core';
import {CommonModule} from '@angular/common';
import {FormsModule} from '@angular/forms';
import {Observable} from 'rxjs';
import {Message, MessageService} from '../services/message.service';

@Component({
    selector: 'app-shoutbox',
    standalone: true,
    imports: [CommonModule, FormsModule],
    template: `
    &lt;h2&gt;Shoutbox en Temps Réel&lt;/h2&gt;
    &lt;div&gt;
      &lt;input type=&quot;text&quot; [(ngModel)]=&quot;newMessage&quot; 
             placeholder=&quot;Votre message...&quot; (keyup.enter)=&quot;postMessage()&quot;&gt;
      &lt;button (click)=&quot;postMessage()&quot;&gt;Envoyer&lt;/button&gt;
    &lt;/div&gt;

    &lt;ul&gt;
      @for (message of messages$ | async; track message.id) {
        &lt;li&gt;{{ message.text }}&lt;/li&gt;
      }
    &lt;/ul&gt;
  `
})
export class ShoutboxComponent implements OnInit {
    private messageService = inject(MessageService);

    messages$!: Observable&lt;Message[]&gt;;
    newMessage = '';

    ngOnInit(): void {
        this.messages$ = this.messageService.getMessages();
    }

    postMessage(): void {
        if (this.newMessage.trim()) {
            this.messageService.addMessage(this.newMessage.trim())
                .then(() =&gt; this.newMessage = '') // Efface le champ si succès
                .catch(err =&gt; console.error(err));
        }
    }
}
</div><ol class="list _decimal"></ol></section></div></div></section></section><section class="chapter"><h2 id="conclusion" data-toc="conclusion">Conclusion</h2><p id="xjqtbs_149">Vous venez d'ajouter une corde extr&ecirc;mement puissante &agrave; votre arc. En ma&icirc;trisant les bases de Firebase, vous avez consid&eacute;rablement r&eacute;duit la barri&egrave;re entre le frontend et le backend. Vous savez maintenant comment mettre en place rapidement un syst&egrave;me d'authentification robuste et comment interagir avec une base de donn&eacute;es temps r&eacute;el performante. Pour de nombreux projets (prototypes, applications internes, startups...), Firebase peut m&ecirc;me &ecirc;tre la seule solution backend dont vous aurez besoin.</p><p id="xjqtbs_150">Mais Firebase est encore plus puissant. Que faire si vous avez besoin d'une logique m&eacute;tier personnalis&eacute;e c&ocirc;t&eacute; serveur ? Ou si vous voulez d&eacute;ployer votre application Angular en une seule commande ? C'est ce que nous allons explorer dans la partie &quot;Pour aller plus loin&quot;, avec les <span class="control" id="xjqtbs_151">Cloud Functions</span> et <span class="control" id="xjqtbs_152">Firebase Hosting</span>.</p></section><div class="last-modified">10 août 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="010-01-advanced-animation.html" class="navigation-links__prev">Bonus 1 : L'Art de l'Animation avec @angular/animations - Pour aller plus loin</a><a href="011-01-advanced-firebase.html" class="navigation-links__next">Bonus 2 : Super-pouvoirs Backend avec Firebase (BaaS) - Pour aller plus loin</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>